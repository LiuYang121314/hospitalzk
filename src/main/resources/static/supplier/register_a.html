<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"/>
    <title>添加企业信息</title>
    <link rel="stylesheet" type="text/css" href="../static/layui/css/layui.css"/>
    <link rel="stylesheet" type="text/css" href="../static/css/admin.css"/>
    <link rel="stylesheet" href="../static/css/all.min.css"/>
    <!--[if IE 8]>
    <script type="text/javascript" src="../static/js/jquery-1.11.3.min.js"></script>
    <![endif]-->
    <script src="../static/layui/layui.js" type="text/javascript" charset="utf-8"></script>
    <style>
        .layui-elem-field{
            width: 100%;
        }
        .btn{
            text-align: center;
        }
        .layui-form{
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
        }
        .layui-form-item{
            margin-left: 30px;
        }
    </style>
</head>
<body>
    <div class="layui-row">
        <p style="height: 34px;width: 100%;line-height: 34px;background-color: lightyellow; text-align: center;">红色标识<span class="sign">* </span>为必填项,请认真填写</p>
        <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
            <legend style="text-align: center;font-size: 22px;">添加企业信息</legend>
        </fieldset>
        <div class="col-xs-12">
            <form class="layui-form layui-form-pane" action="">
                <div class="layui-form-item col-md-4">
                    <label class="layui-form-label"><span style="color: red;">*</span>企业名称</label>
                    <div class="layui-input-block">
                        <input type="text" name="suMc" class="layui-input" autocomplete="off" lay-verify="required">
                    </div>
                </div>
                <div class="layui-form-item col-md-4">
                    <label class="layui-form-label">所在省份</label>
                    <div class="layui-input-block">
                        <select id="sheng" name="suSf" lay-verify="" lay-search>
                            <option value=""></option>
                        </select>
                    </div>
                </div>
                <div class="layui-form-item col-md-4">
                    <label class="layui-form-label">所在城市</label>
                    <div class="layui-input-block">
                        <select id="shi" name="suCs" lay-verify="" lay-search>
                            <option value=""></option>
                        </select>
                    </div>
                </div>
                <div class="layui-form-item col-md-4">
                    <label class="layui-form-label">所在区县</label>
                    <div class="layui-input-block">
                        <select id="qu" name="suXq" lay-verify="" lay-search>
                            <option value=""></option>
                        </select>
                    </div>
                </div>
                <div class="layui-form-item col-md-4">
                    <label class="layui-form-label"><span style="color: red;">*</span>企业法人</label>
                    <div class="layui-input-block">
                        <input type="text" name="suFr" class="layui-input" autocomplete="off" lay-verify="required">
                    </div>
                </div>
                <div class="layui-form-item col-md-4">
                    <label class="layui-form-label">企业登记人</label>
                    <div class="layui-input-block">
                        <input type="text" name="suDjr" class="layui-input" autocomplete="off">
                    </div>
                </div>
                <div class="layui-form-item col-md-4">
                    <label class="layui-form-label">企业负责人</label>
                    <div class="layui-input-block">
                        <input type="text" name="suFzr" class="layui-input" autocomplete="off">
                    </div>
                </div>
                <div class="layui-form-item col-md-4">
                    <label class="layui-form-label"><span style="color: red;">*</span>开户银行</label>
                    <div class="layui-input-block">
                        <input type="text" name="suKhyh" class="layui-input" autocomplete="off" lay-verify="required">
                    </div>
                </div>
                <div class="layui-form-item col-md-4">
                    <label class="layui-form-label"><span style="color: red;">*</span>开户银行账号</label>
                    <div class="layui-input-block">
                        <input type="text" name="suKhyhzh" placeholder="开户银行账号" class="layui-input" autocomplete="off" lay-verify="required">
                    </div>
                </div>
                <div class="layui-form-item col-md-4">
                    <label class="layui-form-label"><span style="color: red;">*</span>公司地址</label>
                    <div class="layui-input-block">
                        <input type="text" name="suGsdz" class="layui-input" autocomplete="off" lay-verify="required">
                    </div>
                </div>
                <div class="layui-form-item col-md-4">
                    <label class="layui-form-label"><span style="color: red;">*</span>联系人姓名</label>
                    <div class="layui-input-block">
                        <input type="text" name="suLxrxm" class="layui-input" placeholder="联系人姓名" autocomplete="off" lay-verify="required">
                    </div>
                </div>
                <div class="layui-form-item col-md-4">
                    <label class="layui-form-label"><span style="color: red;">*</span>联系电话</label>
                    <div class="layui-input-block">
                        <input type="text" name="suLxrdh" class="layui-input" autocomplete="off" lay-verify="required">
                    </div>
                </div>
                <div class="layui-form-item col-md-4">
                    <label class="layui-form-label">部门</label>
                    <div class="layui-input-block">
                        <input type="text" name="suLxrbm" class="layui-input" autocomplete="off">
                    </div>
                </div>
                <div class="layui-form-item col-md-4">
                    <label class="layui-form-label"><span style="color: red;">*</span>公司电话</label>
                    <div class="layui-input-block">
                        <input type="text" name="suDh" class="layui-input" autocomplete="off" lay-verify="required">
                    </div>
                </div>
                <div class="layui-form-item col-md-4">
                    <label class="layui-form-label"><span style="color: red;">*</span>公司邮编</label>
                    <div class="layui-input-block">
                        <input type="text" name="suYb" class="layui-input" autocomplete="off" lay-verify="required">
                    </div>
                </div>
                <div class="layui-form-item col-md-4">
                    <label class="layui-form-label"><span style="color: red;">*</span>公司邮箱</label>
                    <div class="layui-input-block">
                        <input type="text" name="suEmail" class="layui-input" autocomplete="off" lay-verify="required">
                    </div>
                </div>
                <div class="layui-form-item col-md-4">
                    <label class="layui-form-label">公司传真</label>
                    <div class="layui-input-block">
                        <input type="text" name="suCz" class="layui-input" autocomplete="off">
                    </div>
                </div>
                <div class="layui-form-item col-md-4">
                    <label class="layui-form-label">公司网址</label>
                    <div class="layui-input-block">
                        <input type="text" name="suWz" class="layui-input" autocomplete="off">
                    </div>
                </div>
                <div class="layui-form-item col-md-6">
                    <label class="layui-form-label">备注</label>
                    <div class="layui-input-block">
                        <input type="text" name="bz" class="layui-input" autocomplete="off">
                    </div>
                </div>
                <div class="layui-form-item col-md-12 btn">
                    <div class="layui-input-block">
                        <button class="layui-btn layui-btn-normal layui-btn-lg" lay-submit lay-filter="nextTap" id="check-btn">下一步</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <script>
        // 加载省的列表
        function getProvinceList(){
            // 清空当前列表
            $("#sheng").empty();
            // 发出ajax请求，并处理结果
            $.ajax({
                url:"/district/list/86",
                method:"POST",
                dataType:"JSON",
                success:function(res){
                    // 遍历加载新列表项
                    var list = res.data;
                    for (var i = 0; i < list.length; i++) {
                        console.log(list[i].code + " - " + list[i].name);
                        op = '<option value="' + list[i].code + '">' + list[i].name + '</option>';
                        $("#sheng").append(op);
                    }
                }
            });
        }
        // 加载市的列表
        function getCityList(){
            // 清空当前列表
            $("#shi").empty();
            // 获取所选择的省
            var code = $("#sheng").val();
            // 判断省的代号的值
            if (code === 0) {
                return;
            }
            // 发出ajax请求，并处理结果
            $.ajax({
                url:"/district/list/"+code,
                method:"POST",
                dataType:"JSON",
                success:function(res){
                    // 遍历加载新列表项
                    var list = res.data;
                    for (var i = 0; i < list.length; i++) {
                        console.log(list[i].code + " - " + list[i].name);
                        op = '<option value="' + list[i].code + '">' + list[i].name + '</option>';
                        $("#shi").append(op);
                    }
                }
            });
        }
        // 加载区的列表
        function getAreaList(){
            // 清空当前列表
            $("#qu").empty();
            // 获取所选择的市
            var code = $("#shi").val();
            // 判断市的代号的值
            if (code === 0) {
                return;
            }
            // 发出ajax请求，并处理结果
            $.ajax({
                url:"/district/list/"+code,
                method:"POST",
                dataType:"JSON",
                success:function(res){
                    // 遍历加载新列表项
                    var list = res.data;
                    for (var i = 0; i < list.length; i++){
                        console.log(list[i].code + " - " + list[i].name);
                        op = '<option value="' + list[i].code + '">' + list[i].name + '</option>';
                        $("#qu").append(op);
                    }
                }
            });
        }
        $(function(){
            // 加载省的列表
            getProvinceList();
            // 为省的列表绑定change事件
            $("#sheng").change(function(){
                // 加载市的列表
                getCityList();
                // 清空区列表
                $("#qu").empty();
                // 添加默认选项
                var op = '<option value="0">--- 请选择 ---</option>';
                $("#qu").append(op);
            });
            // 为市的列表绑定change事件
            $("#shi").change(function(){
                // 加载区的列表
                getAreaList();
            });
        });
        layui.use(['jquery','layer','form','upload'],function(){
            var layer = layui.layer
            ,   upload = layui.upload
            ,   $ = layui.jquery
            ,   form = layui.form;
            form.on('submit(nextTap)', function(data){
                console.log(data.field);
                $.ajax({
                    url:"/suinfo/insert",
                    method:"POST",
                    data:data.field,
                    dataType:"JSON",
                    success:function(res){
                        if(res.state === 200){
                            setTimeout(function(){
                                location.href = "/supplier/register_b.html?id="+res.data;
                            }, 1000);
                            layer.msg("提交成功");
                        }else if(res.state === 603){
                            layer.msg("213456789");
                        }else{
                            layer.msg("提交失败");
                        }
                    },
                    error:function(data){
                        layer.msg("请稍后再试");
                        console.log(data);
                    }
                });
                return false;
            });
        });
    </script>
</body>
</html>